<div class="header">
    <div class="title-container">
        <div class="title-one">Fright Club</div>
        <div class="title-two">A Stephen King Reading List</div>
    </div>
</div>
<div class="lower-nav-bar">

    <div class="book-count" *ngIf="user_name">{{user_name}} has read {{read_count}} of {{book_count}} {{(selected_category == 'All') ? '' : selected_category}} books.
    </div>
    <div class="book-count" *ngIf="!user_name">No user logged in. Sign in to make your list.</div>
</div>

<div class="outer-container">
    <div class="book-list-controls">
        <div class="book-search-bar">
            <label>Filter by Name</label>
            <input class="search-bar" type="text" [(ngModel)]="search_string" (input)="filterBooksBySearch()" placeholder="Search">
            <button class="clear-button" (click)="clearSearchBar()">Clear</button>
        </div>
        <div class="book-category-dropdown">
            <label>Filter by Category</label>
            <select class="dropdown" [(ngModel)]="selected_category" (ngModelChange)="filterBooksByCategory()">
                <option *ngFor="let category of dropdown_categories" [value]="category">
                  {{ category }}
                </option>
            </select>
        </div>
        <div class="show-all-details" >
            <button class="show-all-details-button" [ngClass]="{'is-hidden': !show_all_details}" type="button" (click)="hideAllDetails()">Hide All Details</button>
            <button class="show-all-details-button" [ngClass]="{'is-hidden': show_all_details}" type="button" (click)="showAllDetails()">Show All Details</button>
        </div>
    </div>

    <div class="book-list" [ngClass]="{'book-completed':book.completed}" *ngFor="let book of filtered_books">
        <div class="book">
            <div class="book-checkbox">
                <input type="checkbox" id="{{book.book_id}}-completed" [disabled]="disable_checkbox" [(ngModel)]="book.completed" (change)="updateUserBook(book.book_id)">
            </div>
            
            <div class="book-title">
                <h3 class="title">{{book.title}} - {{book.publish_year}}</h3>
                <button class="show-details-button" id="{{book.book_id}}-button" (click)="showDetails(book.book_id)">Show Details</button>
            </div>
            
            <div class="book-details is-hidden" id="{{book.book_id}}">
                <ul class="book-description">
                    <li>Author: {{book.authors}}</li>
                    <li>Published: {{book.publish_year}}</li>
                    <li>Page Count: {{book.page_count}}</li>
                    <li>{{book.description}}</li>
                </ul>
                <img src="../../assets/images/book-covers/{{book.cover_id}}-L.jpg">
            </div>
        </div>

    </div>
</div>
