<div class="header">
    Fright Club
</div>
<div class="lower-nav-bar">
    <p>{{user_name}}</p>
</div>

<div class="outer-container">
    <p>TODO</p>
    <p>change page color -- logic done, just need to do styling</p>
    <p>compare to other users</p>
    <p>open/close all descriptions</p>
    <p>login to play</p>
    <div class="book-search-bar">
        <input type="text" [(ngModel)]="search_string" (input)="filterBooksBySearch()" placeholder="Find Book by Name">
        <button type="button" (click)="clearSearchBar()">Clear</button>
    </div>
    <div class="book-category-dropdown">
        <select [(ngModel)]="selected_category" (ngModelChange)="filterBooksByCategory()">
            <option *ngFor="let category of dropdown_categories" [value]="category">
              {{ category }}
            </option>
        </select>
    </div>

    <div class="book-count">{{user_name}} has read {{read_count}} of {{book_count}} books in the {{selected_category}} category</div>
    
    <div class="book-list" *ngFor="let book of filtered_books">
        <div class="book">
            <div class="book-checkboxes">
                <div class="checkbox-row">
                    <input type="checkbox" id="{{book.book_id}}-completed"[(ngModel)]="book.completed" (change)="updateUserBook(book.book_id)">
                    <label class="checkbox-label" for="{{book.book_id}}-completed">finished</label>
                </div>

                <div class="checkbox-row">
                    <input type="checkbox" id="{{book.book_id}}-in_progress"[(ngModel)]="book.in_progress" (change)="updateUserBook(book.book_id)">
                    <label class="checkbox-label" for="{{book.book_id}}-in_progress">reading</label>
                </div>

                <div class="checkbox-row">
                    <input type="checkbox" id="{{book.book_id}}-owned"[(ngModel)]="book.owned" (change)="updateUserBook(book.book_id)">
                    <label class="checkbox-label" for="{{book.book_id}}-in_progress">owned</label>
                </div>
            </div>
            
            <div class="book-title">
                <h3 class="title">{{book.title}} - {{book.publish_year}}</h3>
                <button class="show-details-button" id="{{book.book_id}}-button" (click)="showDetails(book.book_id)">Show Details</button>
            </div>
            
            <div class="book-details is-hidden" id="{{book.book_id}}">
                <ul class="book-description">
                    <li>Author: {{book.authors}}</li>
                    <li>Published: {{book.publish_year}}</li>
                    <li>Page Count: {{book.page_count}}</li>
                    <li>{{book.description}}</li>
                </ul>
                <img src="../../assets/images/book-covers/{{book.cover_id}}-L.jpg">
            </div>
        </div>

    </div>
</div>
